networks:
  1panel-network:
    external: true  # 接入 1Panel 已创建的外部网络

services:
  toolhub:
    image: python:3.10-slim
    container_name: toolhub2025
    working_dir: /app
    volumes:
      - .:/app  # 挂载当前目录（代码热更新）
    ports:
       - "14567:14567"  # 主机:容器端口
    networks:
      - 1panel-network
    restart: always
    environment:
      - TZ=Asia/Shanghai  # 时区，可选
    command: >
      sh -c "apt-get update && 
             apt-get install -y ffmpeg && 
             pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple && 
             exec uvicorn main:app --host 0.0.0.0 --port 14567"
